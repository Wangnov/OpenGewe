# AI 对话助手 (AIAssistant)

## 概述

本插件将您的机器人变身为一个强大的AI对话助手。它通过对接兼容OpenAI格式的大语言模型（LLM），为用户提供智能、连贯的对话体验。插件采用指令式开关，仅在私聊中生效，以确保专注和私密的交流。

## 功能

- **对话模式开关**：通过特定指令（默认为“AI”）开启或关闭对话模式，避免不必要的打扰。
- **智能对话**：利用外部大语言模型提供高质量的问答和对话能力。
- **上下文记忆**：在单次对话模式中，能够记住与用户的近期对话历史（可配置轮数），实现更自然的交流。
- **流式响应**：AI的回答会以打字机的方式逐字或逐句发送，大大提升了交互的实时感。
- **私聊限定**：为避免群聊中的信息干扰，助手仅在私聊中被唤醒。
- **高度可配置**：API地址、密钥、模型名称、系统提示词等关键参数均可在配置文件中轻松修改。

## 使用方法

1.  确保插件已启用。
2.  在 `plugins/AIAssistant/config.toml` 文件中填入您的API信息。
3.  在私聊中向机器人发送指令（默认为 **AI**）来开启对话模式。
4.  在对话模式中，直接发送任何消息即可与AI对话。
5.  再次发送指令（默认为 **AI**）即可关闭对话模式。

## 配置

配置文件 `config.toml` 示例如下：

```toml
# AIAssistant 插件的配置文件

# 兼容OpenAI格式的API地址
base_url = "https://your-api-endpoint.com/v1"

# API Key
api_key = "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# 使用的模型名称
model = "gpt-4o"

# 用于开启和关闭对话模式的触发词
trigger_word = "AI"

# 系统提示词，用于设定AI的角色和行为
system_prompt = "你是一个乐于助人的AI助手。"

# 对话历史记录的轮数限制
history_limit = 10
```

**重要提示**：请务必将 `base_url` 和 `api_key` 修改为您自己的有效信息，否则插件将无法工作。

## 依赖

本插件需要 `openai` Python库。如果您的环境中尚未安装，请执行：

```bash
pip install openai
```

## 扩展方向

- **群聊支持**：增加群聊中的@唤醒机制。
- **多模态能力**：扩展支持图片理解、文件分析等功能。
- **可变系统提示词**：允许用户通过指令动态修改AI的角色设定。